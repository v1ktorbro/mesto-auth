{"version":3,"sources":["images/login-success.svg","images/login-fail.svg","components/Header.js","components/Footer.js","components/Card.js","contexts/CurrentUserContext.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/Api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","contexts/InitialCardsContext.js","utils/utils.js","auth.js","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/PageNotFound.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","children","className","href","Footer","Card","currentUser","card","onCardClick","onCardLike","onCardDelete","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","like","cardLikeButtonClassName","src","link","alt","name","onClick","length","CurrentUserContext","React","createContext","Main","onEditProfile","onAddPlace","onEditAvatar","cards","useContext","avatar","about","map","key","PopupWithForm","title","inputSignature","isOpen","onClose","onSubmit","isForm","noValidate","type","ImagePopup","toLowerCase","api","url","headers","this","fetch","then","res","ok","json","Promise","reject","status","data","method","body","JSON","stringify","cardId","Authorization","EditProfilePopup","onUpdateUser","useState","firstName","setFirstName","description","setDescription","useEffect","evt","preventDefault","defaultValue","onChange","e","target","value","id","required","pattern","placeholder","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","imageRef","useRef","current","ref","AddPlacePopup","nameRef","linkRef","InitialCardsContext","toggleBurgerMenu","btn","document","querySelector","header","classList","toggle","BASE_URL","getInfoLogin","token","catch","err","console","log","InfoTooltip","success","message","isOpenInfoTool","setIsOpenInfoTool","registerSuccess","loginFail","Login","handleLogin","emailRef","passwordRef","error","setError","messageError","setMessageError","to","event","email","password","localStorage","setItem","auth","getInfo","Register","handleRegister","ProtectedRoute","Component","loggedIn","PageNotFound","App","setLoggedIn","infoLoginUser","setInfoLoginUser","setRegisterSuccess","history","useHistory","setCurrentUser","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","closeAllPopups","handleCheckToken","all","getInfoUser","getInitialCards","userData","cardsFromApi","push","getItem","path","Provider","removeItem","utils","deleteLikeCard","putLikeCard","newCard","newCards","currentCard","deleteCard","filter","editProfile","finally","dataNewCard","addCard","addNewCard","changeAvatar","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.940a4a0c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/login-success.75df9ada.svg\";","module.exports = __webpack_public_path__ + \"static/media/login-fail.db56ee32.svg\";","import React from 'react';\r\n\r\nfunction Header ({children}) {\r\n    return (\r\n        <header className=\"header\">\r\n            <a href=\"###\" className=\"header__logo\">logo</a>\r\n            {children}\r\n        </header>\r\n    )\r\n}\r\n\r\n export default Header;","import React from 'react';\r\n\r\nfunction Footer () {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020. Абросимов Виктор</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer; ","import React from 'react'\r\n\r\nfunction Card ({\r\n                currentUser, \r\n                card, \r\n                onCardClick, \r\n                onCardLike,\r\n                onCardDelete\r\n              }) \r\n{\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\r\n  const cardDeleteButtonClassName = (\r\n    `${isOwn ? 'card__btn-delete' : 'card__btn-delete_hidden'}`\r\n  );\r\n\r\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n  const isLiked = card.likes.some(like => like._id === currentUser._id);\r\n\r\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n  const cardLikeButtonClassName = (\r\n    `${isLiked ? 'btn-image btn-image_like btn-image_like_active' : 'btn-image btn-image_like'}`\r\n    ); \r\n\r\n  function handleClick() {\r\n    onCardClick(card.name, card.link)\r\n  }\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <img src={card.link} alt={`карточка с изображением ${card.name}`} className=\"card__image\" onClick={handleClick} />\r\n            <button className={cardDeleteButtonClassName} onClick={() => onCardDelete(card)}>\r\n              <div className=\"btn-image btn-image_delete\"></div>\r\n            </button>\r\n            <div className=\"card__info\">\r\n              <h2 className=\"card__title\">{card.name}</h2>\r\n              <div className=\"card__block-like\">\r\n                <button className=\"card__btn-like\" onClick={() => onCardLike(card)}>\r\n                  <div className={cardLikeButtonClassName}></div>\r\n                </button>\r\n                <span className=\"card__count-like\">{card.likes.length}</span>\r\n              </div>\r\n            </div>\r\n        </div>\r\n  )\r\n}\r\n\r\nexport default Card","import React from 'react';\r\nexport const CurrentUserContext = React.createContext()","import React from 'react'\r\nimport Card from './Card.js'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\r\n\r\nfunction Main ({\r\n                  onEditProfile, \r\n                  onAddPlace, \r\n                  onEditAvatar, \r\n                  onCardClick,\r\n                  cards,\r\n                  onCardLike,\r\n                  onCardDelete\r\n              }) \r\n{\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    return (\r\n        <main className=\"content\">\r\n          <section className=\"profile\">\r\n            <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__avatar\" onClick={onEditAvatar} />\r\n            <span className=\"profile__edit-avatar\"></span>\r\n            <div className=\"profile__info\">\r\n              <div className=\"profile__change-elem\">\r\n                <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n                <button className=\"profile__btn-edit\" onClick={onEditProfile}>\r\n                  <div className=\"btn-image btn-image_edit\"></div>\r\n                </button>\r\n              </div>\r\n              <p className=\"profile__signature\">{currentUser.about}</p>\r\n            </div>\r\n            <button className=\"profile__btn-plus\" onClick={onAddPlace}>\r\n                <div className=\"btn-image btn-image_plus\"></div>\r\n            </button>\r\n          </section>\r\n          <section className=\"cards\">\r\n            {cards.map((card) => \r\n              <Card key={card._id} card={card}\r\n                currentUser={currentUser}\r\n                onCardLike={onCardLike} \r\n                onCardDelete={onCardDelete} \r\n                onCardClick={onCardClick}\r\n              /> \r\n            )}\r\n          </section> \r\n      </main>\r\n    )\r\n}\r\n\r\nexport default Main;","import React from 'react'\r\n\r\nfunction PopupWithForm ({\r\n                          title, name, inputSignature, \r\n                          children, isOpen, onClose, \r\n                          onSubmit, isForm\r\n                        }) \r\n{\r\n    return (\r\n        <section className={`popup-${name} popup ${!isOpen && 'popup_closed' }`}>\r\n        <form name={name} className=\"popup__container\" onSubmit={onSubmit} noValidate>\r\n          <span className=\"popup__close\" onClick={onClose} ></span>\r\n          { isForm && <h2 className=\"popup__title\">{title}</h2> }\r\n          {children}\r\n          { isForm && <button type=\"submit\" className=\"popup__input-save\">\r\n            <p className=\"popup__text-color\">{inputSignature}</p>\r\n          </button> }\r\n        </form>\r\n       </section>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm","import React from 'react'\r\n\r\nfunction ImagePopup ({onClose, card}) {\r\n    return (\r\n        <section className={`popup popup-image ${!card.isOpen && 'popup_closed'}`}>\r\n          <div className=\"popup-image__container\">\r\n            <img src={card.link} alt={`Картинка с изображением ${card.name}`.toLowerCase()} className=\"popup-image__content\" />\r\n            <span className=\"popup__close\" onClick={onClose}></span>\r\n            <p className=\"popup-image__name\">{card.name}</p>\r\n          </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ImagePopup","class Api {\r\n  constructor({url, headers}) {\r\n    this.url = url;\r\n    this.headers = headers\r\n  }\r\n  getInfoUser() {\r\n    return fetch(`${this.url}users/me`, {headers: this.headers})\r\n    .then((res) => {\r\n      if(res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Что-то пошло не так: ошибка ${res.status}`)\r\n    })\r\n  }\r\n  getInitialCards() {\r\n    return fetch(`${this.url}cards`, {headers: this.headers})\r\n    .then(res => {\r\n      if(res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Сбой загрузки карточек: ошибка ${res.status}`)\r\n    })\r\n  }\r\n  editProfile(data) {\r\n    return fetch(`${this.url}users/me`, {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    })\r\n    .then(res => {\r\n      if(res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Ошибка отправки данных на сервер: проблема ${res.status}`)\r\n    })\r\n  }\r\n  addCard(data) {\r\n    return fetch(`${this.url}cards`, {\r\n      method: 'POST',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        link: data.link\r\n      })\r\n    })\r\n    .then(res => {\r\n      if(res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Ошибка отправки данных на сервер: проблема ${res.status}`)\r\n    })\r\n  }\r\n  deleteCard(cardId) {\r\n      return fetch(`${this.url}cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this.headers\r\n    })\r\n  }\r\n  putLikeCard(cardId) {\r\n      return fetch(`${this.url}cards/likes/${cardId}`, {\r\n        method: 'PUT',\r\n        headers: this.headers\r\n      })\r\n      .then(res => {\r\n        if(res.ok) {\r\n          return res.json()\r\n        }\r\n        return Promise.reject(`Не удалось поставить лайк карточки: ошибка ${res.status}`)\r\n      })\r\n  }\r\n  deleteLikeCard(cardId) {\r\n    return fetch(`${this.url}cards/likes/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this.headers\r\n    })\r\n    .then(res => {\r\n      if(res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Не удалось убрать лайк с карточки: ошибка ${res.status}`)\r\n    })\r\n  }\r\n  changeAvatar(data) {\r\n    return fetch(`${this.url}users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this.headers,\r\n      body: JSON.stringify({\r\n        avatar: data.avatar\r\n      })\r\n    })\r\n     .then(res => {\r\n      if(res.ok) {\r\n        return res.json()\r\n      }\r\n      return Promise.reject(`Ошибка отправки данных на сервер: проблема ${res.status}`)\r\n    })\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: 'https://mesto.nomoreparties.co/v1/cohort-12/',\r\n  headers: {\r\n    Authorization: '9bd0d0c4-e4a3-422a-9469-bb5b72a2dcf0',\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\nexport default api\r\n","import React from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n    const [firstName, setFirstName] = React.useState('');\r\n    const [description, setDescription] = React.useState('')\r\n    const currentUser = React.useContext(CurrentUserContext)\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault()\r\n        onUpdateUser({\r\n            name: firstName,\r\n            about: description\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setFirstName(currentUser.name);\r\n        setDescription(currentUser.about)\r\n    }, [currentUser])\r\n\r\n    return (\r\n\r\n        <PopupWithForm \r\n            name=\"edit\" \r\n            title=\"Редактировать профиль\" \r\n            inputSignature=\"Сохранить\" \r\n            isOpen={isOpen} \r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isForm={true}\r\n        >\r\n            <input \r\n                name=\"name\" \r\n                type=\"text\" \r\n                defaultValue={firstName} \r\n                onChange={(e) => setFirstName(e.target.value)} \r\n                className=\"popup__input popup__input-name\" \r\n                id='name-input' \r\n                required pattern=\"[A-Za-zА-Яа-я -]{2,40}\" \r\n                placeholder=\"Имя\" \r\n            />\r\n            <span className=\"popup__input-error\" id=\"name-input-error\" />\r\n            <input \r\n                name=\"about\" \r\n                type=\"text\" \r\n                defaultValue={description} \r\n                onChange={(e) => setDescription(e.target.value)} \r\n                className=\"popup__input popup__input-signature\" \r\n                id='signature-input' \r\n                required minLength='2' \r\n                maxLength='200' \r\n                placeholder=\"О себе\" \r\n            />\r\n            <span className=\"popup__input-error\" id=\"signature-input-error\" />\r\n        </PopupWithForm>\r\n    )\r\n}\r\nexport default EditProfilePopup","import React from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n    const imageRef = React.useRef('')\r\n    const currentUser = React.useContext(CurrentUserContext)\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault()\r\n        onUpdateAvatar({\r\n            avatar: imageRef.current.value\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm \r\n            name=\"avatar\" \r\n            title=\"Обновить аватар\" \r\n            inputSignature=\"Сохранить\" \r\n            isOpen={isOpen} \r\n            onClose={onClose}\r\n            onSubmit={handleSubmit} \r\n            isForm={true}\r\n        >\r\n            <input \r\n                name=\"avatar\" \r\n                ref={imageRef}\r\n                defaultValue={currentUser.avatar}\r\n                type=\"url\" \r\n                className=\"popup__input popup__input-signature\" \r\n                id='signature-input' \r\n                required \r\n                placeholder=\"Ссылка на картинку\" \r\n            />\r\n            <span className=\"popup__input-error\" id=\"signature-input-error\" />\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup","import React, { useRef } from 'react'\r\nimport PopupWithForm from './PopupWithForm.js'\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n    const nameRef = useRef('')\r\n    const linkRef = useRef('')\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault()\r\n        onAddPlace({\r\n            name: nameRef.current.value,\r\n            link: linkRef.current.value\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm \r\n            name=\"place\" \r\n            title=\"Новое место\" \r\n            inputSignature=\"Создать\" \r\n            isOpen={isOpen} \r\n            onClose={onClose}\r\n            onSubmit={handleSubmit}\r\n            isForm={true} \r\n        >\r\n            <input \r\n                name=\"name\" \r\n                ref={nameRef}\r\n                type=\"text\" \r\n                className=\"popup__input popup__input-name\" \r\n                id='name-input'   \r\n                required \r\n                pattern=\"[A-Za-zА-Яа-я -]{1,30}\" \r\n                placeholder=\"Название\" \r\n            />\r\n            <span className=\"popup__input-error\" id=\"name-input-error\"></span>\r\n            <input \r\n                name=\"link\" \r\n                type=\"url\" \r\n                ref={linkRef}\r\n                className=\"popup__input popup__input-signature\"   \r\n                id='signature-input' \r\n                required \r\n                placeholder=\"Ссылка на картинку\" \r\n            />\r\n            <span className=\"popup__input-error\" id=\"signature-input-error\"></span>\r\n        </PopupWithForm>\r\n    )\r\n}\r\nexport default AddPlacePopup","import React from 'react';\r\nexport const InitialCardsContext = React.createContext()","export const toggleBurgerMenu = () => {\r\n  const btn = document.querySelector('.burger-menu');\r\n  const header = document.querySelector('.header');\r\n  btn.classList.toggle('burger-menu_active');\r\n  header.classList.toggle('header_burger-menu');\r\n};\r\n\r\nexport const formObject = {\r\n  formSelector: '.popup__container',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__input-save', // кнопка 'сохранить' | 'создать'\r\n  inactiveButtonClass: 'popup__input-save_inactive',\r\n  inputErrorClass: 'popup__input-name_type_error', //красная линия под инпутом\r\n  errorSpanClass: 'popup__input-error_active' //span с текстом ошибки\r\n};\r\n\r\nexport const configFormPlus = (popup, formObject) => {\r\n  const form = document.querySelector(popup);\r\n  const inputList = form.querySelectorAll(\".popup__input\");\r\n  inputList.forEach(input => input.value = \"\");\r\n  //т.к в форме создания карточек изначально инфа отсутствует, кнопка будет неактивной при открытии\r\n  const btnCreate = form.querySelector(\".popup__input-save\")\r\n  btnCreate.classList.add(formObject.inactiveButtonClass);\r\n};\r\n\r\nexport const renderLoading = (isLoading, popupSelector, text) => {\r\n  const popup = document.querySelector(popupSelector)\r\n  const btnSave = popup.querySelector('.popup__text-color');\r\n  if(isLoading) {\r\n    btnSave.textContent = 'Сохранение...'\r\n  } else {\r\n    btnSave.textContent = text\r\n  }\r\n}\r\n","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = ({ email, password }) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n  .then((res) => {\r\n    return res.json();\r\n  })\r\n  .then((res) => {\r\n    return res\r\n  })\r\n  .catch((err) => {\r\n    return console.log(err)\r\n  })\r\n};\r\n\r\nexport const authorize = ({ email, password }) => {\r\n  return fetch(`${ BASE_URL }/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ email, password })\r\n  })\r\n  .then((res) => {\r\n    return res.json();\r\n  })\r\n  .then((data) => {\r\n    if (data.token) {\r\n      localStorage.setItem('token', data.token);\r\n      return data;\r\n    }\r\n      return data\r\n  })\r\n  .catch((err) => {\r\n    return console.log(err)\r\n  })\r\n};\r\n\r\nexport const getInfoLogin = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    }\r\n  })\r\n  .then((res) => {\r\n    return res.json()\r\n  })\r\n  .then(({ data }) => {\r\n    return (data)\r\n  })\r\n  .catch((err) => {\r\n    return console.log(err)\r\n  })\r\n};","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport registerSuccess from '../images/login-success.svg';\r\nimport loginFail from '../images/login-fail.svg';\r\n\r\nfunction InfoTooltip ({ success, message }) {\r\n    const [isOpenInfoTool, setIsOpenInfoTool] = React.useState(true)\r\n    const handleClose = () => {\r\n        setIsOpenInfoTool(false)\r\n    };\r\n    return (\r\n        <PopupWithForm \r\n            name='tool-tip'\r\n            isForm={false}\r\n            isOpen={isOpenInfoTool}\r\n            onClose={handleClose}\r\n        >\r\n            <img className='tool-tip__image' src={ success ? registerSuccess : loginFail } alt={ success ? 'Инфо картинка об успешной регистрации' : 'Инфо-картинка о неудачной попытке ввода данных' } />\r\n            <h2 className='tool-tip__title' >{ success ? 'Вы успешно зарегистировались!' : message ||'Что-то пошло не так! Попробуйте еще раз.' }</h2>\r\n        </PopupWithForm>\r\n    );\r\n};\r\n\r\nexport default InfoTooltip; ","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport * as auth from '../auth';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction Login ({ handleLogin }) {\r\n  const emailRef = React.useRef('');\r\n  const passwordRef = React.useRef('');\r\n  const [error, setError] = React.useState(false);\r\n  const [messageError, setMessageError] = React.useState('');\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setError(false);\r\n    if(!emailRef.current.value || !passwordRef.current.value) {\r\n      setMessageError('Пожалуйста, введите email и пароль');\r\n      return setError(true);\r\n    }\r\n    const data = {\r\n      email: emailRef.current.value,\r\n      password: passwordRef.current.value\r\n    };\r\n    auth.authorize(data).then((res) => {\r\n      if(!res.token) {\r\n        setMessageError(res.message || res.error);\r\n        return setError(true);\r\n      }\r\n      const token = res.token;\r\n      auth.getInfoLogin(token).then((getInfo) => {\r\n        return handleLogin(getInfo);\r\n      })\r\n    })\r\n    .catch((err) => {\r\n      setError(true);\r\n      return console.log(err);\r\n    })\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Header>\r\n      <Link to='sign-up' className='login__signup login__signup_header' >Регистрация</Link>\r\n    </Header>\r\n    <main className='login' >\r\n      <section className='login__enter'>\r\n        <h2 className='login__title' >Вход</h2>\r\n        <form onSubmit={handleSubmit} className='login__form' >\r\n          <input ref={emailRef} type='email' placeholder='Email' className='login__input login__input_email' />\r\n          <input ref={passwordRef} type='password' placeholder='Пароль' className='login__input login__input_pswd' />\r\n          <button type='submit' className='login__btn-submit' >Войти</button>\r\n          <div className='login__block-signup'>\r\n            <p className='login__issue' >Еще не зарегистрированы? \r\n              <Link to='sign-up' className='login__signup login__signup_form' > Регистрация</Link>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </section>\r\n      { error && <InfoTooltip success={false} message={messageError} /> }\r\n    </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport * as auth from '../auth';\r\nimport InfoTooltip from './InfoTooltip';\r\n\r\nfunction Register ({ handleRegister }) {\r\n  const emailRef = React.useRef('');\r\n  const passwordRef = React.useRef('');\r\n  const [error, setError] = React.useState(false);\r\n  const [messageError, setMessageError] = React.useState('');\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setError(false);\r\n    if(!emailRef.current.value || !passwordRef.current.value) {\r\n      setMessageError('Пожалуйста, введите email и пароль');\r\n      return setError(true);\r\n    }\r\n    const data = {\r\n      email: emailRef.current.value,\r\n      password: passwordRef.current.value\r\n    }\r\n    auth.register(data).then((res) => {\r\n      //если пришли данные пользователя, то отправляем их в шапку и открываем главную страницу\r\n      if (res.data) {\r\n        return handleRegister(res.data);\r\n      }\r\n      //иначе записываем ошибку и возвращаем pop-up с этой ошибкой\r\n      setMessageError(res.error || res.message);\r\n      return setError(true);\r\n    })\r\n\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Header>\r\n        <Link to='sign-in' className='login__signup login__signup_header' >Войти</Link>\r\n    </Header>\r\n    <main className='login' >\r\n      <section className='login__enter'>\r\n        <h2 className='login__title' >Регистрация</h2>\r\n        <form onSubmit={handleSubmit} className='login__form' >\r\n          <input ref={emailRef} type='email' name='email' placeholder='Email' className='login__input login__input_email' />\r\n          <input ref={passwordRef} type='password' name='password' placeholder='Пароль' className='login__input login__input_pswd' />\r\n          <button type='submit' className='login__btn-submit' >Зарегистрироваться</button>\r\n          <div className='login__block-signup'>\r\n            <p className='login__issue' >Уже зарегистрированы? \r\n              <Link to='sign-up' className='login__signup login__signup_form' > Войти</Link>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </section>\r\n      { error && <InfoTooltip success={false} message={messageError} /> }\r\n    </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;","import React from 'react'\r\nimport { Route, Redirect } from 'react-router-dom' \r\n\r\nconst ProtectedRoute = ({Component, loggedIn }) => {\r\n    return (\r\n        <Route>\r\n            {\r\n                () => loggedIn ? Component : <Redirect to='/sign-in' />\r\n            }\r\n        </Route>\r\n    );\r\n};\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\n\r\nfunction PageNotFound () {\r\n  return (\r\n    <>\r\n    <Header >\r\n      <Link to='sign-in' className='login__signup login__signup_header' >На главную</Link>\r\n    </Header>\r\n    <section className='not-found' >\r\n      <p className='not-found__error'>404</p>\r\n      <h2 className='not-found__title' >Кажется страница не найдена. Проверьте введенный вами адрес.</h2>\r\n    </section>\r\n    </>\r\n  )\r\n};\r\n\r\nexport default PageNotFound;","import React from 'react';\r\nimport { Switch, Route, useHistory } from 'react-router-dom';\r\nimport Header from './Header.js';\r\nimport Footer from './Footer.js';\r\nimport Main from './Main.js';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport api from '../utils/Api.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport { InitialCardsContext } from '../contexts/InitialCardsContext.js';\r\nimport * as utils from '../utils/utils'\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport * as auth from '../auth';\r\nimport PageNotFound from './PageNotFound'\r\n\r\n\r\nfunction App() {\r\n\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [infoLoginUser, setInfoLoginUser] = React.useState('');\r\n  const [registerSuccess, setRegisterSuccess] = React.useState(false);\r\n  const history = useHistory();\r\n  //информация о текущем пользователе\r\n  const [currentUser, setCurrentUser] = React.useState({});\r\n  const [cards, setCards] = React.useState([]);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  //хук для поп-ап окна при нажатии на картинку\r\n  const [selectedCard, setSelectedCard] = React.useState({\r\n    isOpen: false,\r\n    name: '',\r\n    link: ''\r\n  })\r\n\r\n  React.useEffect(() => {\r\n    handleCheckToken();\r\n    Promise.all([api.getInfoUser(), api.getInitialCards()])\r\n    .then(([userData, cardsFromApi]) => {\r\n      setCurrentUser(userData);\r\n      setCards(cardsFromApi);\r\n    })\r\n    .catch(err => console.log(err))\r\n  }, []) // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  function handleAddPlaceSubmit(dataNewCard) {\r\n    console.log(dataNewCard)\r\n    api.addCard(dataNewCard)\r\n    .then((addNewCard) => {\r\n      setCards([...cards, addNewCard])\r\n    })\r\n    .catch(err => console.log(err))\r\n    .finally(closeAllPopups())\r\n  };\r\n\r\n  function handleCardLike(card) {\r\n    //проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\r\n    (!isLiked ? api.putLikeCard(card._id) : api.deleteLikeCard(card._id))\r\n    .then((newCard) => {\r\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((currentCard) => currentCard._id === card._id ? newCard : currentCard);\r\n      // Обновляем стейт\r\n      setCards(newCards)\r\n    })\r\n    .catch(err => console.log(err)) \r\n  };\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n    .then(() => {\r\n      const newCards = cards.filter((currentCard) => currentCard._id !== card._id)\r\n      setCards(newCards)\r\n    })\r\n    .catch(err => console.log(err))\r\n  };\r\n\r\n  function handleUpdateUser(userData) {\r\n     api.editProfile(userData)\r\n    .then((data) => {\r\n      setCurrentUser(data)\r\n    })\r\n    .catch(err => console.log(err))\r\n    .finally(closeAllPopups()) \r\n  };\r\n\r\n  function handleUpdateAvatar(userData) {\r\n     api.changeAvatar(userData)\r\n    .then((data) => {\r\n      setCurrentUser(data)\r\n    })\r\n    .catch(err => console.log(err))\r\n    .finally(closeAllPopups()) \r\n  };\r\n\r\n  function handleCardClick(name, link) {\r\n    setSelectedCard({\r\n      isOpen: true,\r\n      name: name,\r\n      link: link\r\n    })\r\n  };\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true)\r\n  };\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true)\r\n  };\r\n  function handleAddPlaceClick () {\r\n    setIsAddPlacePopupOpen(true)\r\n  };\r\n\r\n  function closeAllPopups () {\r\n    setIsEditProfilePopupOpen(false)\r\n    setIsEditAvatarPopupOpen(false)\r\n    setIsAddPlacePopupOpen(false)\r\n    setSelectedCard({\r\n      isOpen: false,\r\n      name: '',\r\n      link: ''\r\n    })\r\n  };\r\n\r\n  const handleLogin = (data) => {\r\n    setLoggedIn(true);\r\n    history.push('/my-profile');\r\n    setInfoLoginUser(data);\r\n  }\r\n  \r\n  const handleRegister = (data) => {\r\n    setLoggedIn(true);\r\n    history.push('/my-profile');\r\n    setInfoLoginUser(data);\r\n    setRegisterSuccess(true);\r\n  };\r\n\r\n  const handleCheckToken = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      auth.getInfoLogin(token).then((getInfo) => {\r\n        return handleLogin(getInfo);\r\n      })\r\n    }\r\n  };\r\n  \r\n  const signOut = () => {\r\n    localStorage.removeItem('token');\r\n    history.push('/sign-in');\r\n    setRegisterSuccess(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route path='/sign-in'>\r\n          <Login handleLogin={handleLogin} />\r\n        </Route>\r\n        <Route path='/sign-up'>\r\n          <Register handleRegister={handleRegister} />\r\n        </Route>\r\n        <ProtectedRoute path='/' loggedIn={loggedIn}  Component={\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n        <InitialCardsContext.Provider value={cards}>\r\n          <Header >\r\n            <div className='header__info'  >\r\n              <p className='header__email' >{infoLoginUser.email}</p>\r\n              <button className='header__sign-out' onClick={signOut} >Выйти</button>\r\n            </div>\r\n            <span className='burger-menu' onClick={utils.toggleBurgerMenu} />\r\n          </Header>\r\n          <Main \r\n            onEditProfile={handleEditProfileClick} \r\n            onAddPlace={handleAddPlaceClick} \r\n            onEditAvatar={handleEditAvatarClick} \r\n            onCardClick={handleCardClick}\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n          />\r\n          <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n          <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n          <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n          <PopupWithForm name=\"delete\" title=\"Вы уверены?\" inputSignature=\"Да\" />\r\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n          { registerSuccess && <InfoTooltip success={true} /> }\r\n        </InitialCardsContext.Provider>\r\n        </CurrentUserContext.Provider>\r\n        } />\r\n        <Footer />\r\n        <Route path='*'>\r\n          <PageNotFound />\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App.js';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}