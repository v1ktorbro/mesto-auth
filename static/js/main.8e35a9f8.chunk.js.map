{"version":3,"sources":["images/login-success.svg","images/login-fail.svg","components/Header.js","components/Footer.js","components/Card.js","contexts/CurrentUserContext.js","components/Main.js","components/PopupWithForm.js","components/ImagePopup.js","utils/Api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","contexts/InitialCardsContext.js","utils/utils.js","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/PageNotFound.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","children","className","href","Footer","Card","currentUser","card","onCardClick","onCardLike","onCardDelete","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","likeId","cardLikeButtonClassName","src","link","alt","name","onClick","type","length","CurrentUserContext","React","createContext","Main","onEditProfile","onAddPlace","onEditAvatar","cards","useContext","avatar","about","map","key","PopupWithForm","title","inputSignature","isOpen","onClose","onSubmit","isForm","noValidate","ImagePopup","toLowerCase","api","url","headers","this","_updateToken","fetch","then","res","ok","json","status","localStorage","removeItem","Promise","reject","data","method","body","JSON","stringify","cardId","token","getItem","setItem","Authorization","EditProfilePopup","onUpdateUser","useState","firstName","setFirstName","description","setDescription","useEffect","evt","preventDefault","defaultValue","onChange","e","target","value","id","required","pattern","placeholder","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","imageRef","useRef","current","ref","AddPlacePopup","nameRef","linkRef","InitialCardsContext","toggleBurgerMenu","btn","document","querySelector","header","classList","toggle","InfoTooltip","success","message","isOpenInfoTool","setIsOpenInfoTool","registerSuccess","loginFail","Login","handleLogin","emailRef","passwordRef","error","setError","messageError","setMessageError","to","event","email","password","Register","handleRegister","ProtectedRoute","Component","loggedIn","BASE_URL","getInfoLogin","catch","err","console","log","PageNotFound","App","setLoggedIn","infoLoginUser","setInfoLoginUser","setRegisterSuccess","history","useHistory","setCurrentUser","setCards","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","closeAllPopups","initialData","all","getInfoUser","getInitialCards","userData","cardsFromApi","auth","getInfo","push","handleCheckToken","path","Provider","utils","deleteLikeCard","putLikeCard","newCard","newCards","currentCard","deleteCard","filter","editProfile","dataNewCard","addCard","addNewCard","changeAvatar","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8e35a9f8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/login-success.75df9ada.svg\";","module.exports = __webpack_public_path__ + \"static/media/login-fail.db56ee32.svg\";","import React from 'react';\n\nfunction Header({ children }) {\n  return (\n    <header className=\"header\">\n      <a href=\"###\" className=\"header__logo\">logo</a>\n      {children}\n    </header>\n  );\n}\n\nexport default Header;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020. Абросимов Виктор</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nimport React from 'react';\n\nfunction Card({\n  currentUser, card, onCardClick,\n  onCardLike, onCardDelete,\n}) {\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner === currentUser._id;\n\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (\n    `${isOwn ? 'card__btn-delete' : 'card__btn-delete_hidden'}`\n  );\n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some((likeId) => {\n    return likeId === currentUser._id;\n  });\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (\n    `${isLiked ? 'btn-image btn-image_like btn-image_like_active' : 'btn-image btn-image_like'}`\n  );\n\n  function handleClick() {\n    onCardClick(card.name, card.link);\n  }\n\n  return (\n    <div className=\"card\">\n      <img src={card.link} alt={`карточка с изображением ${card.name}`} className=\"card__image\" onClick={handleClick} />\n      <button type=\"button\" className={cardDeleteButtonClassName} onClick={() => { return onCardDelete(card); }}>\n        <div className=\"btn-image btn-image_delete\" />\n      </button>\n      <div className=\"card__info\">\n        <h2 className=\"card__title\">{card.name}</h2>\n        <div className=\"card__block-like\">\n          <button type=\"button\" className=\"card__btn-like\" onClick={() => { return onCardLike(card); }}>\n            <div className={cardLikeButtonClassName} />\n          </button>\n          <span className=\"card__count-like\">{card.likes.length}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React from 'react';\nexport const CurrentUserContext = React.createContext()","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\nimport React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main({\n  onEditProfile, onAddPlace, onEditAvatar, onCardClick,\n  cards, onCardLike, onCardDelete,\n}) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__avatar\" onClick={onEditAvatar} />\n        <span className=\"profile__edit-avatar\" />\n        <div className=\"profile__info\">\n          <div className=\"profile__change-elem\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n            <button type=\"button\" className=\"profile__btn-edit\" onClick={onEditProfile}>\n              <div className=\"btn-image btn-image_edit\" />\n            </button>\n          </div>\n          <p className=\"profile__signature\">{currentUser.about}</p>\n        </div>\n        <button type=\"button\" className=\"profile__btn-plus\" onClick={onAddPlace}>\n          <div className=\"btn-image btn-image_plus\" />\n        </button>\n      </section>\n      <section className=\"cards\">\n        { cards.map((card) => {\n          return (\n            <Card\n              key={card._id}\n              card={card}\n              currentUser={currentUser}\n              onCardLike={onCardLike}\n              onCardDelete={onCardDelete}\n              onCardClick={onCardClick}\n            />\n          );\n        })}\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react';\n\nfunction PopupWithForm({\n  title, name, inputSignature,\n  children, isOpen, onClose,\n  onSubmit, isForm,\n}) {\n  return (\n    <section className={`popup-${name} popup ${!isOpen && 'popup_closed'}`}>\n      <form name={name} className=\"popup__container\" onSubmit={onSubmit} noValidate>\n        <span className=\"popup__close\" onClick={onClose} />\n        { isForm && <h2 className=\"popup__title\">{title}</h2> }\n        {children}\n        { isForm && (\n        <button type=\"submit\" className=\"popup__input-save\">\n          <p className=\"popup__text-color\">{inputSignature}</p>\n        </button>\n        ) }\n      </form>\n    </section>\n  );\n}\n\nexport default PopupWithForm;\n","/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react';\n\nfunction ImagePopup({ onClose, card }) {\n  return (\n    <section className={`popup popup-image ${!card.isOpen && 'popup_closed'}`}>\n      <div className=\"popup-image__container\">\n        <img src={card.link} alt={`Картинка с изображением ${card.name}`.toLowerCase()} className=\"popup-image__content\" />\n        <span className=\"popup__close\" onClick={onClose} />\n        <p className=\"popup-image__name\">{card.name}</p>\n      </div>\n    </section>\n  );\n}\n\nexport default ImagePopup;\n","class Api {\n  constructor({url, headers}) {\n    this.url = url;\n    this.headers = headers\n  }\n  getInfoUser() {\n    this._updateToken();\n    return fetch(`${this.url}/users/me`, {headers: this.headers})\n    .then((res) => {\n      if(res.ok) {\n        return res.json();\n      }\n      if (res.status === 401) {\n        return localStorage.removeItem('token');\n      }\n      return Promise.reject(`Что-то пошло не так: ошибка ${res.status}`)\n    })\n  }\n  getInitialCards() {\n    return fetch(`${this.url}/cards`, {headers: this.headers})\n    .then(res => {\n      if(res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Сбой загрузки карточек: ошибка ${res.status}`)\n    })\n  }\n  editProfile(data) {\n    return fetch(`${this.url}/users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about\n      })\n    })\n    .then(res => {\n      if(res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка отправки данных на сервер: проблема ${res.status}`)\n    })\n  }\n  addCard(data) {\n    return fetch(`${this.url}/cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n    .then(res => {\n      if(res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка отправки данных на сервер: проблема ${res.status}`)\n    })\n  }\n  deleteCard(cardId) {\n      return fetch(`${this.url}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n  }\n  putLikeCard(cardId) {\n      return fetch(`${this.url}/cards/${cardId}/likes`, {\n        method: 'PUT',\n        headers: this.headers\n      })\n      .then(res => {\n        if(res.ok) {\n          return res.json()\n        }\n        return Promise.reject(`Не удалось поставить лайк карточки: ошибка ${res.status}`)\n      })\n  }\n  deleteLikeCard(cardId) {\n    return fetch(`${this.url}/cards/${cardId}/likes`, {\n      method: 'DELETE',\n      headers: this.headers\n    })\n    .then(res => {\n      if(res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Не удалось убрать лайк с карточки: ошибка ${res.status}`)\n    })\n  }\n  changeAvatar(data) {\n    return fetch(`${this.url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: data.avatar\n      })\n    })\n    .then(res => {\n      if(res.ok) {\n        return res.json()\n      }\n      return Promise.reject(`Ошибка отправки данных на сервер: проблема ${res.status}`)\n    })\n  }\n  _updateToken() {\n    const token = localStorage.getItem('token');\n    if (token) {\n      localStorage.setItem('token', token);\n      this.headers = {\n        Authorization: token,\n        'Content-Type': 'application/json'\n      }\n    }\n  }\n}\n\nconst api = new Api({\n  url: 'https://mesto-auth.abrosimov.site/api',\n  headers: {\n    Authorization: localStorage.getItem('token'),\n    'Content-Type': 'application/json'\n  }\n})\n\nexport default api\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const [firstName, setFirstName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onUpdateUser({\n      name: firstName,\n      about: description,\n    });\n  }\n\n  React.useEffect(() => {\n    setFirstName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  return (\n\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      inputSignature=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isForm\n    >\n      <input\n        name=\"name\"\n        type=\"text\"\n        defaultValue={firstName}\n        onChange={(e) => { return setFirstName(e.target.value); }}\n        className=\"popup__input popup__input-name\"\n        id=\"name-input\"\n        required\n        pattern=\"[A-Za-zА-Яа-я -]{2,40}\"\n        placeholder=\"Имя\"\n      />\n      <span className=\"popup__input-error\" id=\"name-input-error\" />\n      <input\n        name=\"about\"\n        type=\"text\"\n        defaultValue={description}\n        onChange={(e) => { return setDescription(e.target.value); }}\n        className=\"popup__input popup__input-signature\"\n        id=\"signature-input\"\n        required\n        minLength=\"2\"\n        maxLength=\"200\"\n        placeholder=\"О себе\"\n      />\n      <span className=\"popup__input-error\" id=\"signature-input-error\" />\n    </PopupWithForm>\n  );\n}\nexport default EditProfilePopup;\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const imageRef = React.useRef('');\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onUpdateAvatar({\n      avatar: imageRef.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      inputSignature=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isForm\n    >\n      <input\n        name=\"avatar\"\n        ref={imageRef}\n        defaultValue={currentUser.avatar}\n        type=\"url\"\n        className=\"popup__input popup__input-signature\"\n        id=\"signature-input\"\n        required\n        placeholder=\"Ссылка на картинку\"\n      />\n      <span className=\"popup__input-error\" id=\"signature-input-error\" />\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React, { useRef } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  const nameRef = useRef('');\n  const linkRef = useRef('');\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    onAddPlace({\n      name: nameRef.current.value,\n      link: linkRef.current.value,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name=\"place\"\n      title=\"Новое место\"\n      inputSignature=\"Создать\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isForm\n    >\n      <input\n        name=\"name\"\n        ref={nameRef}\n        type=\"text\"\n        className=\"popup__input popup__input-name\"\n        id=\"name-input\"\n        required\n        pattern=\"[A-Za-zА-Яа-я -]{1,30}\"\n        placeholder=\"Название\"\n      />\n      <span className=\"popup__input-error\" id=\"name-input-error\" />\n      <input\n        name=\"link\"\n        type=\"url\"\n        ref={linkRef}\n        className=\"popup__input popup__input-signature\"\n        id=\"signature-input\"\n        required\n        placeholder=\"Ссылка на картинку\"\n      />\n      <span className=\"popup__input-error\" id=\"signature-input-error\" />\n    </PopupWithForm>\n  );\n}\nexport default AddPlacePopup;\n","import React from 'react';\nexport const InitialCardsContext = React.createContext()","export const toggleBurgerMenu = () => {\n  const btn = document.querySelector('.burger-menu');\n  const header = document.querySelector('.header');\n  btn.classList.toggle('burger-menu_active');\n  header.classList.toggle('header_burger-menu');\n};\n\nexport const formObject = {\n  formSelector: '.popup__container',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__input-save', // кнопка 'сохранить' | 'создать'\n  inactiveButtonClass: 'popup__input-save_inactive',\n  inputErrorClass: 'popup__input-name_type_error', //красная линия под инпутом\n  errorSpanClass: 'popup__input-error_active' //span с текстом ошибки\n};\n\nexport const configFormPlus = (popup, formObject) => {\n  const form = document.querySelector(popup);\n  const inputList = form.querySelectorAll(\".popup__input\");\n  inputList.forEach(input => input.value = \"\");\n  //т.к в форме создания карточек изначально инфа отсутствует, кнопка будет неактивной при открытии\n  const btnCreate = form.querySelector(\".popup__input-save\")\n  btnCreate.classList.add(formObject.inactiveButtonClass);\n};\n\nexport const renderLoading = (isLoading, popupSelector, text) => {\n  const popup = document.querySelector(popupSelector)\n  const btnSave = popup.querySelector('.popup__text-color');\n  if(isLoading) {\n    btnSave.textContent = 'Сохранение...'\n  } else {\n    btnSave.textContent = text\n  }\n}\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport registerSuccess from '../images/login-success.svg';\nimport loginFail from '../images/login-fail.svg';\n\nfunction InfoTooltip({ success, message }) {\n  const [isOpenInfoTool, setIsOpenInfoTool] = React.useState(true);\n  const handleClose = () => {\n    setIsOpenInfoTool(false);\n  };\n  return (\n    <PopupWithForm\n      name=\"tool-tip\"\n      isForm={false}\n      isOpen={isOpenInfoTool}\n      onClose={handleClose}\n    >\n      <img className=\"tool-tip__image\" src={success ? registerSuccess : loginFail} alt={success ? 'Инфо картинка об успешной регистрации' : 'Инфо-картинка о неудачной попытке ввода данных'} />\n      <h2 className=\"tool-tip__title\">{success ? 'Вы успешно зарегистировались!' : message || 'Что-то пошло не так! Попробуйте еще раз.' }</h2>\n    </PopupWithForm>\n  );\n}\n\nexport default InfoTooltip;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from './Header';\nimport InfoTooltip from './InfoTooltip';\n\nfunction Login({ handleLogin, registerSuccess }) {\n  const emailRef = React.useRef('');\n  const passwordRef = React.useRef('');\n  const [error, setError] = React.useState(false);\n  const [messageError, setMessageError] = React.useState('');\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    setError(false);\n    if (!emailRef.current.value || !passwordRef.current.value) {\n      setMessageError('Пожалуйста, введите email и пароль');\n      return setError(true);\n    }\n    const data = {\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    };\n    return handleLogin(data, setMessageError, setError);\n  };\n\n  return (\n    <>\n      <Header>\n        <Link to=\"sign-up\" className=\"login__signup login__signup_header\">Регистрация</Link>\n      </Header>\n      <main className=\"login\">\n        <section className=\"login__enter\">\n          <h2 className=\"login__title\">Вход</h2>\n          <form onSubmit={handleSubmit} className=\"login__form\">\n            <input ref={emailRef} type=\"email\" placeholder=\"Email\" className=\"login__input login__input_email\" />\n            <input ref={passwordRef} type=\"password\" placeholder=\"Пароль\" className=\"login__input login__input_pswd\" />\n            <button type=\"submit\" className=\"login__btn-submit\">Войти</button>\n            <div className=\"login__block-signup\">\n              <p className=\"login__issue\">\n                Еще не зарегистрированы?\n                <Link to=\"sign-up\" className=\"login__signup login__signup_form\"> Регистрация</Link>\n              </p>\n            </div>\n          </form>\n        </section>\n        { error && <InfoTooltip success={false} message={messageError} /> }\n        { registerSuccess && <InfoTooltip success /> }\n      </main>\n    </>\n  );\n}\n\nexport default Login;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from './Header';\nimport InfoTooltip from './InfoTooltip';\n\nfunction Register({ handleRegister }) {\n  const emailRef = React.useRef('');\n  const passwordRef = React.useRef('');\n  const [error, setError] = React.useState(false);\n  const [messageError, setMessageError] = React.useState('');\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    setError(false);\n    if (!emailRef.current.value || !passwordRef.current.value) {\n      setMessageError('Пожалуйста, введите email и пароль');\n      return setError(true);\n    }\n    const data = {\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    };\n    return handleRegister(data, setMessageError, setError);\n  };\n\n  return (\n    <>\n      <Header>\n        <Link to=\"sign-in\" className=\"login__signup login__signup_header\">Войти</Link>\n      </Header>\n      <main className=\"login\">\n        <section className=\"login__enter\">\n          <h2 className=\"login__title\">Регистрация</h2>\n          <form onSubmit={handleSubmit} className=\"login__form\">\n            <input ref={emailRef} type=\"email\" name=\"email\" placeholder=\"Email\" className=\"login__input login__input_email\" />\n            <input ref={passwordRef} type=\"password\" name=\"password\" placeholder=\"Пароль\" className=\"login__input login__input_pswd\" />\n            <button type=\"submit\" className=\"login__btn-submit\">Зарегистрироваться</button>\n            <div className=\"login__block-signup\">\n              <p className=\"login__issue\">\n                Уже зарегистрированы?\n                <Link to=\"sign-in\" className=\"login__signup login__signup_form\"> Войти</Link>\n              </p>\n            </div>\n          </form>\n        </section>\n        { error && <InfoTooltip success={false} message={messageError} /> }\n      </main>\n    </>\n  );\n}\n\nexport default Register;\n","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ Component, loggedIn }) => {\n  return (\n    <Route>\n      {\n          () => { return (loggedIn ? Component : <Redirect to=\"/sign-in\" />); }\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;\n","export const BASE_URL = 'https://mesto-auth.abrosimov.site/api';\n\nexport const register = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((res) => {\n    return res.json();\n  })\n  .then((res) => {\n    return res;\n  })\n  .catch((err) => {\n    return console.log(err);\n  })\n};\n\nexport const authorize = ({ email, password }) => {\n  return fetch(`${ BASE_URL }/signin`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((res) => {\n    return res.json();\n  })\n  .then((data) => {\n    if (data.token) {\n      localStorage.setItem('token', data.token);\n      return data;\n    }\n  })\n  .catch((err) => {\n    return console.log(err)\n  })\n};\n\nexport const getInfoLogin = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  })\n  .then((res) => {\n    return res.json()\n  })\n  .then((data) => {\n    return (data)\n  })\n  .catch((err) => {\n    return console.log(err)\n  })\n};","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from './Header';\n\nfunction PageNotFound() {\n  return (\n    <>\n      <Header>\n        <Link to=\"sign-in\" className=\"login__signup login__signup_header\">На главную</Link>\n      </Header>\n      <section className=\"not-found\">\n        <p className=\"not-found__error\">404</p>\n        <h2 className=\"not-found__title\">Кажется страница не найдена. Проверьте введенный вами адрес.</h2>\n      </section>\n    </>\n  );\n}\n\nexport default PageNotFound;\n","import React from 'react';\nimport { Switch, Route, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Main from './Main';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/Api';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { InitialCardsContext } from '../contexts/InitialCardsContext';\nimport * as utils from '../utils/utils';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport * as auth from '../utils/auth';\nimport PageNotFound from './PageNotFound';\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [infoLoginUser, setInfoLoginUser] = React.useState('');\n  const [registerSuccess, setRegisterSuccess] = React.useState(false);\n  const history = useHistory();\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({\n    isOpen: false,\n    name: '',\n    link: '',\n  });\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({\n      isOpen: false,\n      name: '',\n      link: '',\n    });\n  }\n\n  const handleCheckToken = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth.getInfoLogin(token).then((getInfo) => {\n        setLoggedIn(true);\n        history.push('/my-profile');\n        return setInfoLoginUser(getInfo);\n      });\n    }\n    return token;\n  };\n\n  const initialData = () => {\n    Promise.all([api.getInfoUser(), api.getInitialCards()]).then(([userData, cardsFromApi]) => {\n      setCurrentUser(userData);\n      setCards(cardsFromApi);\n    }).catch((err) => {\n      return console.log(err);\n    });\n  }\n\n  React.useEffect(() => {\n    if(handleCheckToken()) {\n      initialData();\n    }\n  }, []);\n\n  function handleAddPlaceSubmit(dataNewCard) {\n    api.addCard(dataNewCard).then((addNewCard) => {\n      setCards([...cards, addNewCard]);\n      return closeAllPopups();\n    }).catch((err) => {\n      return console.log(err);\n    });\n  }\n\n  function handleCardLike(card) {\n    //  проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((likeId) => {\n      return likeId === currentUser._id;\n    });\n    (!isLiked ? api.putLikeCard(card._id) : api.deleteLikeCard(card._id)).then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((currentCard) => {\n        return currentCard._id === card._id ? newCard : currentCard;\n      });\n      setCards(newCards);\n    }).catch((err) => {\n      return console.log(err);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then(() => {\n      const newCards = cards.filter((currentCard) => {\n        return currentCard._id !== card._id;\n      });\n      setCards(newCards);\n    }).catch((err) => {\n      return console.log(err);\n    });\n  }\n\n  function handleUpdateUser(userData) {\n    api.editProfile(userData).then((data) => {\n      setCurrentUser(data);\n      return closeAllPopups();\n    }).catch((err) => {\n      return console.log(err);\n    });\n  }\n\n  function handleUpdateAvatar(userData) {\n    api.changeAvatar(userData).then((data) => {\n      setCurrentUser(data);\n      return closeAllPopups();\n    }).catch((err) => {\n      return console.log(err);\n    });\n  }\n\n  function handleCardClick(name, link) {\n    setSelectedCard({\n      isOpen: true,\n      name: name,\n      link: link,\n    });\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleLogin = (data, setMessageError, setError) => {\n    auth.authorize(data).then((res) => {\n      if (!res.token) {\n        setMessageError(res.message || res.error);\n        return setError(true);\n      }\n      return auth.getInfoLogin(res.token).then((getInfo) => {\n        setLoggedIn(true);\n        history.push('/my-profile');\n        return setInfoLoginUser(getInfo);\n      }).then((res) => {\n        console.log(initialData());\n        initialData();\n      });\n    }).catch((err) => {\n      setError(true);\n      return console.log(err);\n    });\n  };\n\n  const handleRegister = (data, setMessageError, setError) => {\n    auth.register(data).then((res) => {\n      if (res) {\n        history.push('/sign-in');\n        return setRegisterSuccess(true);\n      }\n      setMessageError(res.error || res.message);\n      return setError(true);\n    });\n  };\n\n  const signOut = () => {\n    localStorage.removeItem('token');\n    history.push('/sign-in');\n    setRegisterSuccess(false);\n  };\n\n  return (\n    <>\n      <Switch>\n        <Route path=\"/sign-in\">\n          <Login handleLogin={handleLogin} registerSuccess={registerSuccess} />\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register handleRegister={handleRegister} />\n        </Route>\n        <ProtectedRoute\n          path=\"/\"\n          loggedIn={loggedIn}\n          Component={(\n            <CurrentUserContext.Provider value={currentUser}>\n              <InitialCardsContext.Provider value={cards}>\n                <Header>\n                  <div className=\"header__info\">\n                    <p className=\"header__email\">{infoLoginUser.email}</p>\n                    <button type=\"button\" className=\"header__sign-out\" onClick={signOut}>Выйти</button>\n                  </div>\n                  <span className=\"burger-menu\" onClick={utils.toggleBurgerMenu} />\n                </Header>\n                <Main\n                  onEditProfile={handleEditProfileClick}\n                  onAddPlace={handleAddPlaceClick}\n                  onEditAvatar={handleEditAvatarClick}\n                  onCardClick={handleCardClick}\n                  cards={cards}\n                  onCardLike={handleCardLike}\n                  onCardDelete={handleCardDelete}\n                />\n                <EditProfilePopup\n                  isOpen={isEditProfilePopupOpen}\n                  onClose={closeAllPopups}\n                  onUpdateUser={handleUpdateUser}\n                />\n                <AddPlacePopup\n                  isOpen={isAddPlacePopupOpen}\n                  onClose={closeAllPopups}\n                  onAddPlace={handleAddPlaceSubmit}\n                />\n                <EditAvatarPopup\n                  isOpen={isEditAvatarPopupOpen}\n                  onClose={closeAllPopups}\n                  onUpdateAvatar={handleUpdateAvatar}\n                />\n                <PopupWithForm name=\"delete\" title=\"Вы уверены?\" inputSignature=\"Да\" />\n                <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n              </InitialCardsContext.Provider>\n            </CurrentUserContext.Provider>\n        )}\n        />\n        <Footer />\n        <Route path=\"*\">\n          <PageNotFound />\n        </Route>\n      </Switch>\n    </>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}